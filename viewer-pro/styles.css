:root{
  --bg: #0b0c10;
  --bg2:#0f1117;
  --fg: #eaf0ff;
  --mut:#9aa4c3;
  --pri:#00ffd1;
  --pri2:#125bff;
  --red:#ff5577;
  --card:#0f1320;
  --ring:#2a6df6;
  --shadow: 0 6px 18px rgba(0,0,0,.35);
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; color:var(--fg); background:var(--bg);
  font:15px/1.55 system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
}

.topbar{
  position:sticky; top:0; z-index:10;
  display:flex; align-items:center; gap:.75rem; padding:.6rem 1rem;
  background:linear-gradient(180deg,#0b0c10,#0b0c10e0 60%,#0b0c10c0);
  border-bottom:1px solid #151929; backdrop-filter:saturate(120%) blur(4px);
}
.brand{font-weight:700; letter-spacing:.2px}
.brand .pro{color:var(--pri); font-weight:800}

.toolbar{display:flex; flex-wrap:wrap; align-items:center; gap:.5rem}
.btn{
  appearance:none; border:1px solid #1d2236; background:#12172a; color:var(--fg);
  padding:.45rem .7rem; border-radius:.55rem; cursor:pointer; box-shadow:var(--shadow);
}
.btn:hover{filter:brightness(1.1)}
.btn.subtle{background:#0f1320;border-color:#1a2034}
.btn.danger{background:#2a0f18;border-color:#3b1320;color:#ffd6df}
.pipe{width:1px;height:26px;background:#1c243d;margin:0 .25rem}

.knob{display:inline-flex; align-items:center; gap:.4rem; color:var(--mut)}
.knob input[type="range"]{vertical-align:middle}
.knob input[type="number"]{width:4.5rem}

.main{display:grid; grid-template-columns:280px 1fr; gap:0}
.sidebar{
  border-right:1px solid #151929; background:#0c0f1a; min-height:calc(100vh - 120px);
}
.sidehead{padding:10px 12px; font-weight:600; color:#b7c2ea; border-bottom:1px solid #151929}
.list{list-style:none;margin:0;padding:8px}
.list li{
  display:flex; justify-content:space-between; align-items:center; gap:.75rem;
  padding:.6rem .6rem; margin-bottom:.5rem; border:1px solid #1b2136; border-radius:.6rem; background:#0f1320;
}
.list .name{font-weight:600}
.list .sub{color:var(--mut); font-size:12px}
.list .actions{display:flex; gap:.4rem}

.stage{
  position:relative; padding:1.2rem; min-height:calc(100vh - 120px);
  outline:none;
}
.stage:focus{box-shadow:0 0 0 3px var(--ring) inset; border-radius:.6rem}
.empty{color:#9aa4c3; opacity:.8}

.pdf-page{display:block; margin:0 auto; border-radius:.5rem; box-shadow:var(--shadow)}
.epub-mount{height:84vh; border-radius:.6rem; overflow:hidden}
.stage.narrow{max-width:720px}
.stage.wide{max-width:1200px}

.lens{
  position:absolute; width:320px; height:120px; border-radius:10px;
  pointer-events:none; border:2px solid #2a6df6; box-shadow:0 0 0 3000px rgba(0,0,0,.35) inset, 0 6px 20px rgba(0,0,0,.5);
  display:none; mix-blend-mode:normal; backdrop-filter:blur(1px) brightness(120%);
}
.lens.on{display:block}

.status{
  display:grid; grid-template-columns:2fr repeat(5,1fr);
  gap:12px; padding:.6rem 1rem; border-top:1px solid #151929; background:#0b0c10;
  color:#c6d0f5; font-size:13px;
}
.status strong{color:#fff}

/* Reader mode */
body.reader .sidebar, body.reader .topbar{display:none}
body.reader .status{position:fixed; left:0; right:0; bottom:0; background:#0b0c10e6; backdrop-filter:blur(6px)}
body.reader .stage{min-height:calc(100vh - 44px); padding:2.2rem 1.4rem; max-width:900px; margin:0 auto}
