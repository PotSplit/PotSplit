:root{
  --bg:#0b0c10;
  --fg:#eaf0ff;
  --muted:#9fb2d1;
  --acc:#00ffd1;
  --danger:#ff4d6d;
  --sepia-bg:#f4ecd8;
  --sepia-fg:#3b2f1e;
  --light-bg:#f7f9fc;
  --light-fg:#0b0c10;
}
*{ box-sizing:border-box; }
html,body{ height:100%; margin:0; }
body{
  font: 16px/1.6 system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif;
  color:var(--fg); background:var(--bg);
  overflow:hidden;
}
.font-serif { font-family: Georgia, 'Times New Roman', serif; }
.font-sans  { font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }
.font-dys   { font-family: "OpenDyslexic", "Atkinson Hyperlegible", "Comic Sans MS", system-ui, sans-serif; }

.theme-dark { --bg:#0b0c10; --fg:#eaf0ff; --muted:#9fb2d1; --acc:#00ffd1; }
.theme-sepia{ --bg:var(--sepia-bg); --fg:var(--sepia-fg); --muted:#7b6a57; --acc:#19647e; }
.theme-light{ --bg:var(--light-bg); --fg:var(--light-fg); --muted:#4d5b78; --acc:#19647e; }

.topbar, .subbar, .statusbar{
  display:flex; align-items:center; gap:.75rem;
  padding:.6rem 1rem; border-bottom:1px solid color-mix(in srgb, var(--fg) 10%, transparent);
  background: color-mix(in srgb, var(--bg) 94%, black 0%);
}
.statusbar{ border-top:1px solid color-mix(in srgb, var(--fg) 10%, transparent); border-bottom:none; gap:2rem; }
.topbar .brand{ display:flex; align-items:center; gap:.5rem; margin-right: .75rem; }
.logo{ width:26px; height:26px; border-radius:8px; background:var(--acc); color:var(--bg); display:inline-grid; place-items:center; font-weight:800; }
.group{ display:flex; align-items:center; gap:.5rem; flex-wrap:wrap; }

.btn{
  background: color-mix(in srgb, var(--fg) 8%, transparent);
  color: var(--fg); border:1px solid color-mix(in srgb, var(--fg) 14%, transparent);
  padding:.45rem .7rem; border-radius:.6rem; cursor:pointer;
}
.btn:hover{ border-color: color-mix(in srgb, var(--acc) 60%, transparent); }
.btn.subtle{ background:transparent; }
.btn.danger{ border-color: color-mix(in srgb, var(--danger) 60%, transparent); color:var(--danger); }
.btn.file{ position:relative; overflow:hidden; }
.btn.file input{ position:absolute; inset:0; opacity:0; cursor:pointer; }

.input{
  padding:.45rem .6rem; border-radius:.6rem; border:1px solid color-mix(in srgb, var(--fg) 14%, transparent);
  color:var(--fg); background:transparent; min-width:220px;
}
.num{ width:60px; }

.chk{ display:flex; align-items:center; gap:.35rem; cursor:pointer; }
label{ display:flex; align-items:center; gap:.35rem; }

.shell{ display:grid; grid-template-columns: 290px 1fr; height: calc(100vh - 110px); }
.sidebar{ border-right:1px solid color-mix(in srgb, var(--fg) 10%, transparent); overflow:auto; padding:.75rem; }
.stage{ position:relative; overflow:auto; background: color-mix(in srgb, var(--bg) 98%, transparent); }

.tabs{ display:flex; gap:.5rem; margin-bottom:.5rem; }
.tab{
  background:transparent; color:var(--fg);
  padding:.35rem .6rem; border:1px solid color-mix(in srgb, var(--fg) 14%, transparent);
  border-radius:.6rem; cursor:pointer;
}
.tab.on{ border-color: var(--acc); color: var(--acc); }

.panel{ display:none; }
.panel.on{ display:block; }

.list{ list-style:none; margin:0; padding:0; display:grid; gap:.5rem; }
.list li{
  display:flex; justify-content:space-between; gap:.5rem;
  padding:.5rem; border:1px solid color-mix(in srgb, var(--fg) 10%, transparent); border-radius:.6rem;
}
.list .meta{ display:grid; gap:.15rem; }
.list .name{ font-weight:600; }
.list .sub{ color:var(--muted); font-size:.9em; }
.row.mt{ margin-top:.75rem; }

.content{ padding:1rem; min-height:100%; outline:none; font-size:100%; }
.content.narrow{ max-width: 640px; margin:auto; }
.content.wide{ max-width: 1100px; margin:auto; }

.reader .topbar, .reader .subbar, .reader .sidebar, .reader .statusbar{ display:none; }
.reader .shell{ grid-template-columns: 1fr; height: 100vh; }
.reader .content{ padding: min(2.5rem, 4vw); font-size: 110%; }

.pdf-page{ display:block; margin:0 auto; }

.lens{
  position:absolute; width:260px; height:100px; border-radius:16px;
  outline: 2px solid color-mix(in srgb, var(--acc) 60%, transparent);
  backdrop-filter: brightness(130%) saturate(120%);
  pointer-events:none; opacity:0; transition:opacity .15s ease; top:10%; left:10%;
}
.lens.on{ opacity:1; }

.tap{ position:absolute; top:0; bottom:0; width:22%; background:transparent; border:0; cursor:pointer; }
.tap.left{ left:0; }
.tap.right{ right:0; }

.empty{ padding:2rem; color:var(--muted); text-align:center; }

/* Search highlight inside EPUB iframes (injected) */
.epub-mark{ background: color-mix(in srgb, var(--acc) 30%, yellow 15%); outline: 1px solid color-mix(in srgb, var(--acc) 70%, transparent); }
