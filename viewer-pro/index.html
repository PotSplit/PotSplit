<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>AeonSight Pro ‚Äî PotSplit</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0b0c0f; --card:#11131a; --muted:#9aa0aa; --text:#eef2ff;
      --accent:#00ffd1; --accent-2:#ff4fd8; --glass:rgba(255,255,255,.06); --border:rgba(255,255,255,.12);
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;color:var(--text);
      background: radial-gradient(1000px 500px at 80% -10%, rgba(255,79,216,.1), transparent 60%),
                  radial-gradient(800px 400px at 10% 10%, rgba(0,255,209,.12), transparent 60%),
                  linear-gradient(180deg,#0b0c10,#090a0d 40%, #0a0b10 100%);}
    header{position:sticky;top:0;z-index:50;backdrop-filter:saturate(150%) blur(6px);
      background:linear-gradient(180deg, rgba(10,10,14,.75), rgba(10,10,14,.35) 70%, transparent);
      border-bottom:1px solid var(--border);padding:.8rem 1rem}
    .wrap{max-width:1200px;margin:0 auto;padding:0 16px;display:flex;align-items:center;justify-content:space-between}
    .brand{display:flex;gap:10px;align-items:center}
    .logo{width:28px;height:28px;border-radius:8px;background:conic-gradient(from 180deg,var(--accent),var(--accent-2),var(--accent));box-shadow:0 0 18px rgba(0,255,209,.35), inset 0 0 12px rgba(255,255,255,.12)}
    .tools{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
    button,.btn{background:var(--glass);border:1px solid var(--border);color:var(--text);padding:.6rem .9rem;border-radius:10px;font-weight:700;cursor:pointer}
    button:hover,.btn:hover{border-color:var(--accent);box-shadow:0 0 0 3px rgba(0,255,209,.12) inset}
    .primary{border:none;background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#000}
    main{display:grid;grid-template-columns:320px 1fr;gap:16px;max-width:1200px;margin:18px auto;padding:0 16px}
    aside{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:14px}
    .viewer{background:var(--card);border:1px solid var(--border);border-radius:14px;min-height:70vh;overflow:auto}
    h2,h3{margin:.3rem 0 1rem}
    .muted{color:var(--muted)}
    .lib-list{display:flex;flex-direction:column;gap:10px;max-height:70vh;overflow:auto}
    .lib-item{display:flex;align-items:center;justify-content:space-between;gap:10px;padding:.7rem;border:1px solid var(--border);border-radius:10px;background:var(--glass)}
    .meta{display:flex;flex-direction:column}
    .meta small{color:var(--muted)}
    .row{display:flex;gap:8px;align-items:center}
    #pdfCanvas{display:block;margin:0 auto;padding:16px;background:#0f1116}
    #epubArea{height:70vh}
    .bar{height:8px;background:var(--glass);border:1px solid var(--border);border-radius:999px;overflow:hidden;margin:8px 0 0}
    .bar > span{display:block;height:100%;width:0;background:linear-gradient(90deg,var(--accent),var(--accent-2))}
    @media(max-width:900px){main{grid-template-columns:1fr}}
    .danger{background:#2a1212;border-color:#7a2b2b}
    .danger:hover{box-shadow:0 0 0 3px rgba(255,64,64,.15) inset}
  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <strong>AeonSight Pro</strong>
      </div>
      <div class="tools">
        <label class="btn">
          üì• Import
          <input id="fileInput" type="file" accept=".epub,application/epub+zip,application/pdf,.pdf" hidden multiple />
        </label>
        <button id="toggleMode" class="btn">Reader Mode: ON</button>
        <button id="sleepGuard" class="btn">Sleep Guard ‚è±</button>
        <a class="btn" href="/shop/shop.html">‚Üê Back to Shop</a>
      </div>
    </div>
  </header>

  <main>
    <aside>
      <h3>Library</h3>
      <p class="muted">Your imported EPUB/PDF files. Click a title to open. Use üóë to remove.</p>
      <div id="library" class="lib-list"></div>
      <hr style="border-color:var(--border);margin:14px 0">
      <button id="clearLibrary" class="btn danger">Clear Library (All)</button>
    </aside>

    <section class="viewer" id="viewer">
      <!-- EPUB container -->
      <div id="epubArea" style="display:none;"></div>
      <!-- PDF canvas -->
      <canvas id="pdfCanvas" style="display:none;"></canvas>

      <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Ccircle cx='32' cy='32' r='28' fill='%2300ffd1'/%3E%3C/svg%3E">

      <div id="hud" style="padding:12px;border-top:1px solid var(--border);display:flex;gap:16px;align-items:center;flex-wrap:wrap">
        <div id="status" class="muted">Ready.</div>
        <div style="flex:1;min-width:180px">
          <div class="bar"><span id="progressBar"></span></div>
          <small id="progressText" class="muted">0%</small>
        </div>
        <div class="row">
          <button id="prev" class="btn">‚Üê Prev</button>
          <button id="next" class="btn">Next ‚Üí</button>
        </div>
      </div>
    </section>
  </main>

<!-- ‚úÖ Dependencies (order matters) -->
<!-- JSZip MUST load before ePub.js and must be on window.JSZip -->
<script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>
<script>window.JSZip = window.JSZip || window.jszip || JSZip;</script>

<!-- ePub.js (0.3 line works well with JSZip global) -->
<script src="https://cdn.jsdelivr.net/npm/epubjs@0.3/dist/epub.min.js"></script>

<!-- PDF.js core + worker -->
<script src="https://unpkg.com/pdfjs-dist@3.11.174/build/pdf.min.js"></script>
<script>
  pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://unpkg.com/pdfjs-dist@3.11.174/build/pdf.worker.min.js';
</script>

<!-- App logic -->
<script src="./pro.js"></script>

</body>
</html>
